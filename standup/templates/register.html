{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
:root {
  --primary: #4361ee;
  --secondary: #3f37c9;
  --accent: #4895ef;
  --dark: #212529;
  --light: #f8f9fa;
  --error: #f72585;
}

body {
  margin:0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  padding:20px;
}

.animated-bg {
  position:absolute;
  width:100%;
  height:100%;
  top:0;
  left:0;
  z-index:-1;
  overflow:hidden;
}

.shape {
  position:absolute;
  border-radius:50%;
  background: linear-gradient(45deg, var(--primary), var(--accent));
  animation: float 20s infinite ease-in-out;
  opacity:0.1;
}

.shape:nth-child(1){width:500px;height:500px;top:-200px;left:-100px;animation-delay:0s;}
.shape:nth-child(2){width:400px;height:400px;bottom:-150px;right:-100px;animation-delay:5s;background: linear-gradient(45deg, var(--secondary), var(--accent));}

@keyframes float {
  0%{transform:translateY(0) rotate(0deg);}
  50%{transform:translateY(-25px) rotate(5deg);}
  100%{transform:translateY(0) rotate(0deg);}
}

.container {
  width:100%;
  max-width:600px;
  z-index:1;
  perspective:1000px;
}

.card {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(10px);
  border-radius:20px;
  padding:40px;
  box-shadow:0 15px 35px rgba(0,0,0,0.1);
  transform: rotateX(5deg);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {transform: rotateX(0deg) translateY(-5px); box-shadow:0 20px 45px rgba(0,0,0,0.15);}

h3.card-title {
  text-align:center;
  margin-bottom:30px;
  font-weight:600;
  position:relative;
}
.input-group i {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--primary);
  pointer-events: none; /* icons don’t block typing */
  z-index: 2; /* stays above input text */
  transition: color 0.3s ease;
}
.form-control {
  padding-left: 45px; /* space for the icon */
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  transition: all 0.3s ease;
}
.input-group input:focus ~ i {
  color: var(--accent);
}


h3.card-title::after {
  content:'';
  position:absolute;
  left:50%;
  bottom:-10px;
  transform:translateX(-50%);
  height:4px;
  width:60px;
  background: linear-gradient(to right, var(--primary), var(--accent));
  border-radius:2px;
}

.form-control {
  border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,0.05);
  padding-left:45px;
  transition: all 0.3s ease;
}

.form-control:focus {
  border-color: var(--primary);
  box-shadow:0 5px 20px rgba(67,97,238,0.3);
  background:white;
}

.input-group {position:relative;margin-bottom:20px;}
.input-group i {
  position:absolute;
  left:15px;
  top:50%;
  transform:translateY(-50%);
  color:var(--primary);
  transition: all 0.3s ease;
}

.form-control:focus + i {color: var(--accent);}

.btn-primary {
  border-radius:10px;
  font-weight:600;
  background: linear-gradient(45deg, var(--primary), var(--accent));
  box-shadow:0 10px 20px rgba(67,97,238,0.3);
  position:relative;
  overflow:hidden;
  transition: all 0.3s ease;
}

.btn-primary:hover {transform:translateY(-3px); box-shadow:0 15px 25px rgba(67,97,238,0.4);}

.btn-primary .ripple {
  position:absolute;
  border-radius:50%;
  transform:scale(0);
  animation:ripple 0.6s linear;
  background: rgba(255,255,255,0.6);
  pointer-events:none;
}
.card {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(10px);
  border-radius:20px;
  padding:40px;
  box-shadow:0 15px 35px rgba(0,0,0,0.1);
  transform: rotateX(0deg); /* was 5deg */
  transition: box-shadow 0.3s ease;
}
.input-group {
  position: relative;
  margin-bottom: 20px;
}

.input-group i {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--primary);
  z-index: 2;
}

.form-control {
  padding-left: 45px;
  padding-right: 45px; /* <-- space for toggle icon */
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  transition: all 0.3s ease;
}

/* .toggle-password {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  color: var(--primary);
  z-index: 3;
  transition: color 0.3s ease;
} */

.toggle-password {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  color: var(--primary);
  z-index: 10;  /* <-- increase this value */
  transition: color 0.3s ease;
  pointer-events: all; /* <-- ensure it’s clickable */
}


.toggle-password:hover {
  color: var(--accent);
}



@keyframes ripple {to {transform: scale(4); opacity:0;}}

p.text-center a {color:var(--primary); font-weight:600; transition:0.3s;}
p.text-center a:hover {color:var(--accent); text-decoration:underline;}

@media(max-width:576px){.card{padding:30px 20px;}}
/* --- FIX for password eye icon --- */
.toggle-password {
  position: absolute;
  right: 15px !important; /* override left positioning */
  top: 75%;
  transform: translateY(-50%);
  cursor: pointer;
  color: var(--primary);
  z-index: 10;
  pointer-events: all;
}

.toggle-password i {
  left: auto !important; /* prevent .input-group i from pushing it left */
  right: 0;
  position: relative;
}

.toggle-password:hover {
  color: var(--accent);
}

</style>
</head>
<body>

<div class="animated-bg">
  <div class="shape"></div>
  <div class="shape"></div>
</div>

<div class="container">
  <div class="card">
    <h3 class="card-title">Create Account</h3>

    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for error in form.non_field_errors %}<p>{{ error }}</p>{% endfor %}
      </div>
    {% endif %}

    <form method="POST" action="{% url 'register_view' %}">
      {% csrf_token %}

      <!-- Username -->
      <div class="input-group">
        <input type="text" class="form-control {% if form.username.errors %}is-invalid{% endif %}" id="username" name="username" value="{{ form.username.value|default:'' }}" placeholder="Username" required>
        <i class="fas fa-user"></i>
        {% for error in form.username.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>

      <!-- Email -->
      <div class="input-group">
        <input type="email" class="form-control {% if form.email.errors %}is-invalid{% endif %}" id="email" name="email" value="{{ form.email.value|default:'' }}" placeholder="Email" required>
        <i class="fas fa-envelope"></i>
        {% for error in form.email.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>


      <!-- Password -->
<div class="input-group position-relative mb-3">
  <i class="fas fa-lock"></i>
  <input type="password"
         class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
         id="password1"
         name="password1"
         placeholder="Password"
         required>
  <span class="toggle-password" onclick="togglePassword('password1', this)">
    <i class="fas fa-eye"></i>
  </span>
  {% for error in form.password1.errors %}
    <div class="invalid-feedback">{{ error }}</div>
  {% endfor %}
</div>

<!-- Confirm Password -->
<div class="input-group position-relative mb-3">
  <i class="fas fa-lock"></i>
  <input type="password"
         class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
         id="password2"
         name="password2"
         placeholder="Confirm Password"
         required>
  <span class="toggle-password" onclick="togglePassword('password2', this)">
    <i class="fas fa-eye"></i>
  </span>
  {% for error in form.password2.errors %}
    <div class="invalid-feedback">{{ error }}</div>
  {% endfor %}
</div>


      
     


      <!-- Phone -->
      <div class="input-group">
        <input type="tel" class="form-control {% if form.phone.errors %}is-invalid{% endif %}" id="phone" name="phone" value="{{ form.phone.value|default:'' }}" placeholder="Phone Number" required>
        <i class="fas fa-phone"></i>
        {% for error in form.phone.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>

      <!-- DOB -->
      <div class="input-group">
        <input type="date" class="form-control {% if form.dob.errors %}is-invalid{% endif %}" id="dob" name="dob" value="{{ form.dob.value|default:'' }}" required>
        <i class="fas fa-calendar-alt"></i>
        {% for error in form.dob.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>

      <!-- Address -->
      <div class="input-group">
        <textarea class="form-control {% if form.address.errors %}is-invalid{% endif %}" id="address" name="address" rows="2" placeholder="Address" required>{{ form.address.value|default:'' }}</textarea>
        <i class="fas fa-home"></i>
        {% for error in form.address.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>

      <!-- Designation -->
      <div class="input-group">
        <input type="text" class="form-control {% if form.designation.errors %}is-invalid{% endif %}" id="designation" name="designation" value="{{ form.designation.value|default:'' }}" placeholder="Designation" required>
        <i class="fas fa-briefcase"></i>
        {% for error in form.designation.errors %}<div class="invalid-feedback">{{ error }}</div>{% endfor %}
      </div>

      <button type="submit" class="btn btn-primary w-100" id="registerBtn">Register</button>
      <p class="mt-3 text-center">Already have an account? <a href="{% url 'login_view' %}">Login here</a></p>
    </form>
  </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
function togglePassword(fieldId, btn) {
  const input = document.getElementById(fieldId);
  const icon = btn.querySelector('i');
  if (input.type === "password") {
    input.type = "text";
    icon.classList.replace('fa-eye', 'fa-eye-slash');
  } else {
    input.type = "password";
    icon.classList.replace('fa-eye-slash', 'fa-eye');
  }
}
</script>


</body>
</html>
