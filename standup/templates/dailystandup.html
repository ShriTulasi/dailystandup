<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Standup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f6f9;
    }
    .sidebar {
      height: 100vh;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #343a40;
      padding-top: 20px;
    }
    .sidebar a {
      padding: 12px 20px;
      text-decoration: none;
      font-size: 16px;
      color: #ddd;
      display: block;
      border-left: 3px solid transparent;
      transition: 0.3s;
    }
    .sidebar a:hover {
      background-color: #495057;
      color: #fff;
      border-left: 3px solid #0d6efd;
    }
    .content {
      margin-left: 260px;
      padding: 30px;
    }
    .navbar-brand {
      font-weight: bold;
      color: #0d6efd !important;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .task-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .task-row input {
      flex: 1;
    }
    .task-buttons button {
      min-width: 40px;
    }
    .project-block {
      border: 1px solid #dee2e6;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background: #fff;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h4 class="text-center text-white mb-3">Lead Panel</h4>
    <hr class="bg-light">
    <a href="#">âž• Add Project</a>
    <a href="#">ðŸ‘¤ Add Profile</a>
    <a href="#">ðŸ“‚ Assign Project</a>
    <a href="#">ðŸ“œ Task History</a>
    <a href="#">ðŸšª Logout</a>
  </div>


  <div class="content">
    <nav class="navbar navbar-light bg-white shadow-sm mb-4 p-3 rounded">
      <div class="container w-100 d-flex justify-content-center align-items-center">
        <a class="navbar-brand me-auto">Daily Standup</a>
        <span class="fw-bold fs-5">Welcome, {{ request.user.username }}</span>
      </div>
    </nav>

  
    <div class="container mt-4 col-md-8">
      <div class="card shadow-sm p-4">
        <h4 class="mb-4 text-primary fw-bold">Update Your Daily Standup</h4>

        <form method="post">
          {% csrf_token %}

         
          <div id="projects-container">

           
            <div class="project-block">
              <div class="form-floating mb-3">
                {{ form.project }}
                <label for="id_project">Select Project</label>
              </div>

              <div id="task-container-1">
                <div class="task-row">
                  <input type="text" name="tasks_project_1[]" class="form-control" placeholder="Enter task" required>
                  <div class="task-buttons">
                    <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
                  </div>
                </div>
              </div>
            </div>

          </div>

          
          <div class="mt-3">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="addProject()">âž• Add Another Project Task</button>
          </div>

        
          <div class="d-flex justify-content-end gap-2 mt-4">
            <button type="submit" class="btn btn-primary">Submit Task</button>
            <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='{% url 'employee_dashboard' %}'">Cancel</button>
          </div>
        </form>

      </div>
    </div>
  </div>

  
  <script>
  let projectCount = 1;

  function addTask(button) {
    const container = button.closest(".project-block").querySelector("[id^=task-container]");

    // hide + button from current row
    button.style.display = "none";

    // create new row
    const newRow = document.createElement("div");
    newRow.classList.add("task-row");
    newRow.innerHTML = `
      <input type="text" name="${container.id.replace('task-container','tasks_project')}[]" 
             class="form-control" placeholder="Enter task" required>
      <div class="task-buttons">
        <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
        <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
      </div>
    `;
    container.appendChild(newRow);
  }

  function removeTask(button) {
    const row = button.closest(".task-row");
    const container = row.parentElement;

    // if it's the last row and has a previous sibling â†’ restore its + button
    if (row.nextElementSibling === null && row.previousElementSibling) {
      const prevPlusBtn = row.previousElementSibling.querySelector(".btn-success");
      if (prevPlusBtn) prevPlusBtn.style.display = "inline-block";
    }

    // prevent removing the very first row
    if (container.children.length > 1) {
      row.remove();
    } else {
      alert("At least one task is required!");
    }
  }






function addProject() {
    projectCount++;
    const projectBlock = document.createElement('div');
    projectBlock.classList.add('project-block');

    projectBlock.innerHTML = `
        <div class="form-floating mb-3">
            <select name="project" class="form-select" required>
                {% for p in form.fields.project.queryset %}
                    <option value="{{ p.id }}">{{ p.name }}</option>
                {% endfor %}
            </select>
            <label>Select Project</label>
        </div>
        <div id="task-container-${projectCount}">
            <div class="task-row">
                <input type="text" name="tasks_project_${projectCount}[]" class="form-control" placeholder="Enter task" required>
                <div class="task-buttons">
                    <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
                </div>
            </div>
        </div>
    `;

    document.getElementById('projects-container').appendChild(projectBlock);
}
</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> -->






<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Standup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f9; }
    .task-row { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
    .task-row input { flex: 1; }
    .task-buttons button { min-width: 40px; }
    .project-block { border: 1px solid #dee2e6; padding: 15px; margin-bottom: 15px; border-radius: 8px; background: #fff; }
  </style>
</head>
<body>
<div class="container mt-4 col-md-8">
  <div class="card shadow-sm p-4">
    <h4 class="mb-4 text-primary fw-bold">Update Your Daily Standup</h4>
    <form method="post">
      {% csrf_token %}

      
      <div id="projects-container">
       
        <div class="project-block" id="project-block-1">
          <div class="form-floating mb-3">
            <select name="project_1" class="form-select" required>
              {% for p in form.fields.project.queryset %}
                <option value="{{ p.id }}">{{ p.name }}</option>
              {% endfor %}
            </select>
            <label>Select Project</label>
          </div>
          <div id="task-container-1">
            <div class="task-row">
              <input type="text" name="tasks_project_1" class="form-control" placeholder="Enter task" required>
              <div class="task-buttons">
                <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
                <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button type="button" class="btn btn-outline-primary btn-sm mt-3" onclick="addProject()">âž• Add Another Project Task</button>
      <div class="d-flex justify-content-end gap-2 mt-4">
        <button type="submit" class="btn btn-primary">Submit Task</button>
      </div>
    </form>
  </div>
</div>

<script>
let projectCount = 1;

function addTask(button) {
  const container = button.closest(".project-block").querySelector("[id^=task-container]");
  button.style.display = "none"; 

  const newRow = document.createElement("div");
  newRow.classList.add("task-row");
  newRow.innerHTML = `
    <input type="text" name="${container.id.replace('task-container','tasks_project')}" class="form-control" placeholder="Enter task" required>
    <div class="task-buttons">
      <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
      <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
    </div>
  `;
  container.appendChild(newRow);
}

function removeTask(button) {
  const row = button.closest(".task-row");
  const container = row.parentElement;

  if (row.nextElementSibling === null && row.previousElementSibling) {
    const prevPlusBtn = row.previousElementSibling.querySelector(".btn-success");
    if (prevPlusBtn) prevPlusBtn.style.display = "inline-block";
  }

  if (container.children.length > 1) {
    row.remove();
  } else {
    alert("At least one task is required!");
  }
}

function addProject() {
  projectCount++;
  const projectsContainer = document.getElementById("projects-container");
  const projectBlock = document.createElement("div");
  projectBlock.classList.add("project-block");
  projectBlock.id = `project-block-${projectCount}`;

  let options = `{% for p in form.fields.project.queryset %}<option value="{{ p.id }}">{{ p.name }}</option>{% endfor %}`;

  projectBlock.innerHTML = `
    <div class="form-floating mb-3">
      <select name="project_${projectCount}" class="form-select" required>
        ${options}
      </select>
      <label>Select Project</label>
    </div>
    <div id="task-container-${projectCount}">
      <div class="task-row">
        <input type="text" name="tasks_project_${projectCount}" class="form-control" placeholder="Enter task" required>
        <div class="task-buttons">
          <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
          <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
        </div>
      </div>
    </div>
  `;
  projectsContainer.appendChild(projectBlock);
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> -->







<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Standup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f9; }
    .task-row { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
    .task-row input { flex: 1; }
    .task-buttons button { min-width: 40px; }
    .project-block { border: 1px solid #dee2e6; padding: 15px; margin-bottom: 15px; border-radius: 8px; background: #fff; }
    .sidebar {
      height: 100vh;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #343a40;
      padding-top: 20px;
    }
    .sidebar a {
      padding: 12px 20px;
      text-decoration: none;
      font-size: 16px;
      color: #ddd;
      display: block;
      border-left: 3px solid transparent;
      transition: 0.3s;
    }
    .sidebar a:hover {
      background-color: #495057;
      color: #fff;
      border-left: 3px solid #0d6efd;
    }
    .content {
      margin-left: 260px;
      padding: 30px;
    }
    .navbar-brand {
      font-weight: bold;
      color: #0d6efd !important;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .task-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .task-row input {
      flex: 1;
    }
    .task-buttons button {
      min-width: 40px;
    }
    .project-block {
      border: 1px solid #dee2e6;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background: #fff;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h4 class="text-center text-white mb-3">Lead Panel</h4>
    <hr class="bg-light">
    <a href="#">âž• Add Project</a>
    <a href="#">ðŸ‘¤ Add Profile</a>
    <a href="#">ðŸ“‚ Assign Project</a>
    <a href="#">ðŸ“œ Task History</a>
    <a href="#">ðŸšª Logout</a>
  </div>
  <div class="content">
    <nav class="navbar navbar-light bg-white shadow-sm mb-4 p-3 rounded">
      <div class="container w-100 d-flex justify-content-center align-items-center">
        <a class="navbar-brand me-auto">Daily Standup</a>
        <span class="fw-bold fs-5">Welcome, {{ request.user.username }}</span>
      </div>
    </nav>
<div class="container mt-4 col-md-8">
  <div class="card shadow-sm p-4">
    <h4 class="mb-4 text-primary fw-bold">Update Your Daily Standup</h4>
    <form method="post">
      {% csrf_token %}

      
      <div id="projects-container">
      
        <div class="project-block" id="project-block-1">
          <div class="form-floating mb-3">
            <select name="project_1" class="form-select" required>
              {% for p in form.fields.project.queryset %}
                <option value="{{ p.id }}">{{ p.name }}</option>
              {% endfor %}
            </select>
            <label>Select Project</label>
          </div>

          <div id="task-container-1">
            <div class="task-row">
              <input type="text" name="tasks_project_1[]" class="form-control" placeholder="Enter task activity" required>
              <input type="time" name="time_taken_1[]" class="form-control" placeholder="Time taken" required>
               <select name="status_1[]" class="form-select" required>
                  <option value="pending">Pending</option>
                  <option value="completed">Completed</option>
              </select>
              <input type="date" name="task_date_1[]" class="form-control" value="{{ today }}" required>
              <div class="task-buttons">
                <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
                <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button type="button" class="btn btn-outline-primary btn-sm mt-3" onclick="addProject()">âž• Add Another Project</button>
      <div class="d-flex justify-content-end gap-2 mt-4">
        <button type="submit" class="btn btn-primary">Submit Task</button>
        <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='{% url 'employee_dashboard' %}'">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
let projectCount = 1;


function addTask(button) {
  const container = button.closest(".project-block").querySelector("[id^=task-container]");
  button.style.display = "none"; 

  const newRow = document.createElement("div");
  newRow.classList.add("task-row");

  const index = container.id.split("-")[2]; 
  newRow.innerHTML = `
    <input type="text" name="tasks_project_${index}[]" class="form-control" placeholder="Enter task" required>
    <div class="task-buttons">
      <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
      <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
    </div>
  `;
  container.appendChild(newRow);
}


function removeTask(button) {
  const row = button.closest(".task-row");
  const container = row.parentElement;

  if (container.children.length > 1) {
    row.remove();
  } else {
    alert("At least one task is required!");
  }
}


function addProject() {
  projectCount++;
  const projectsContainer = document.getElementById("projects-container");

  let options = `{% for p in form.fields.project.queryset %}<option value="{{ p.id }}">{{ p.name }}</option>{% endfor %}`;

  const projectBlock = document.createElement("div");
  projectBlock.classList.add("project-block");
  projectBlock.id = `project-block-${projectCount}`;
  projectBlock.innerHTML = `
    <div class="form-floating mb-3">
      <select name="project_${projectCount}" class="form-select" required>
        ${options}
      </select>
      <label>Select Project</label>
    </div>
    <div id="task-container-${projectCount}">
      <div class="task-row">
        <input type="text" name="tasks_project_${projectCount}[]" class="form-control" placeholder="Enter task" required>
        <div class="task-buttons">
          <button type="button" class="btn btn-sm btn-success" onclick="addTask(this)">+</button>
          <button type="button" class="btn btn-sm btn-danger" onclick="removeTask(this)">-</button>
        </div>
      </div>
    </div>
  `;
  projectsContainer.appendChild(projectBlock);
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> -->






<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Standup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f6f9;
    }
    .sidebar {
      height: 100vh;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #343a40;
      padding-top: 20px;
    }
    .sidebar a {
      padding: 12px 20px;
      text-decoration: none;
      font-size: 16px;
      color: #ddd;
      display: block;
      border-left: 3px solid transparent;
      transition: 0.3s;
    }
    .sidebar a:hover {
      background-color: #495057;
      color: #fff;
      border-left: 3px solid #0d6efd;
    }
    .content {
      margin-left: 260px;
      padding: 30px;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .task-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 12px;
    }
    .task-row input, .task-row select {
      flex: 1;
    }
    .task-buttons button {
      min-width: 40px;
    }
    .project-block {
      border: 1px solid #dee2e6;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      background: #fff;
    }
    .project-header {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 1.1rem;
      color: #0d6efd;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h4 class="text-center text-white mb-3">Lead Panel</h4>
    <hr class="bg-light">
    <!-- <a href="#">âž• Add Project</a>
    <a href="#">ðŸ‘¤ Add Profile</a>
    <a href="#">ðŸ“‚ Assign Project</a>
    <a href="#">ðŸ“œ Task History</a>
    <a href="#">ðŸšª Logout</a> -->
    <a href="{% url 'add_emp_profile' %}">ðŸ‘¤ Add Profile</a>
    <a href="{% url 'submit_daily_task' %}">âž• Update Task</a>

   
    <a href="{% url 'employee_task_history' %}">ðŸ“œ Task History</a>
    <a href="{% url 'logout_view' %}">ðŸšª Logout</a>
  </div>

  <div class="content">
    <nav class="navbar navbar-light bg-white shadow-sm mb-4 p-3 rounded">
      <div class="container w-100 d-flex justify-content-between align-items-center">
        <a class="navbar-brand">Daily Standup</a>
        <span class="fw-bold fs-5">Welcome, {{ request.user.username }}</span>
      </div>
    </nav>

    <div class="container col-md-10">
      <form method="post">
        {% csrf_token %}
        <div id="projects-container">
          <div class="project-block" id="project-block-1">
            <div class="project-header">Project 1</div>
            <div class="row mb-3">
              <div class="col-md-6">
                <label>Select Project</label>
                <select name="project_1" class="form-select" required>
                  {% for p in form.fields.project.queryset %}
                    <option value="{{ p.id }}">{{ p.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div id="task-container-1">
              <div class="task-row">
                <input type="text" name="tasks_project_1[]" class="form-control" placeholder="Task description" required>
                <input type="time" name="time_taken_1[]" class="form-control" placeholder="Time taken" required>
                <select name="status_1[]" class="form-select" required>
                  <option value="pending">Pending</option>
                  <option value="completed">Completed</option>
                </select>
                <input type="date" name="task_date_1[]" class="form-control" value="{{ today }}" required>
                <div class="task-buttons">
                  <button type="button" class="btn btn-success btn-sm" onclick="addTask(this)">+</button>
                  <button type="button" class="btn btn-danger btn-sm" onclick="removeTask(this)">-</button>
                </div>
              </div>
              <div class="mt-3">
          <button type="button" class="btn btn-outline-primary btn-sm" onclick="addProject()">âž• Add Another Project</button>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='{% url 'employee_dashboard' %}'">Cancel</button>
        </div>
            </div>
          </div>
        </div>

        <!-- <div class="mt-3">
          <button type="button" class="btn btn-outline-primary btn-sm" onclick="addProject()">âž• Add Another Project</button>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='{% url 'employee_dashboard' %}'">Cancel</button>
        </div> -->
      </form>
    </div>
  </div>

  <script>
    let projectCount = 1;

    function addTask(button) {
      const container = button.closest(".project-block").querySelector("[id^=task-container]");
      button.style.display = "none";

      const index = container.id.split("-")[2];
      const newRow = document.createElement("div");
      newRow.classList.add("task-row");
      newRow.innerHTML = `
        <input type="text" name="tasks_project_${index}[]" class="form-control" placeholder="Task description" required>
        <input type="time" name="time_taken_${index}[]" class="form-control" required>
        <select name="status_${index}[]" class="form-select" required>
          <option value="pending">Pending</option>
          <option value="completed">Completed</option>
        </select>
        <input type="date" name="task_date_${index}[]" class="form-control" value="{{ today }}" required>
        <div class="task-buttons">
          <button type="button" class="btn btn-success btn-sm" onclick="addTask(this)">+</button>
          <button type="button" class="btn btn-danger btn-sm" onclick="removeTask(this)">-</button>
        </div>
      `;
      container.appendChild(newRow);
    }

    function removeTask(button) {
      const row = button.closest(".task-row");
      const container = row.parentElement;
      if (container.children.length > 1) {
        row.remove();
      } else {
        alert("At least one task is required!");
      }
    }

    function addProject() {
      projectCount++;
      const projectsContainer = document.getElementById("projects-container");

      let options = `{% for p in form.fields.project.queryset %}<option value="{{ p.id }}">{{ p.name }}</option>{% endfor %}`;

      const projectBlock = document.createElement("div");
      projectBlock.classList.add("project-block");
      projectBlock.id = `project-block-${projectCount}`;
      projectBlock.innerHTML = `
        <div class="project-header">Project ${projectCount}</div>
        <div class="row mb-3">
          <div class="col-md-6">
            <label>Select Project</label>
            <select name="project_${projectCount}" class="form-select" required>
              ${options}
            </select>
          </div>
        </div>
        <div id="task-container-${projectCount}">
          <div class="task-row">
            <input type="text" name="tasks_project_${projectCount}[]" class="form-control" placeholder="Task description" required>
            <input type="time" name="time_taken_${projectCount}[]" class="form-control" required>
            <select name="status_${projectCount}[]" class="form-select" required>
              <option value="pending">Pending</option>
              <option value="completed">Completed</option>
            </select>
            <input type="date" name="task_date_${projectCount}[]" class="form-control" value="{{ today }}" required>
            <div class="task-buttons">
              <button type="button" class="btn btn-success btn-sm" onclick="addTask(this)">+</button>
              <button type="button" class="btn btn-danger btn-sm" onclick="removeTask(this)">-</button>
            </div>
          </div>
        </div>
      `;
      projectsContainer.appendChild(projectBlock);
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
